# –°–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∫–∏ HTML –≤ C++ –∫–æ–¥

## –û–±–∑–æ—Ä

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–∏—Å—Ç–µ–º—É –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ HTML —Ñ–∞–π–ª–æ–≤ –≤ C++ –∫–æ–¥ —Å base64 –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- ‚úÖ –î–µ—Ä–∂–∞—Ç—å HTML —Ñ–∞–π–ª—ã –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç C++ –∫–æ–¥–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—Å—Ç—Ä–∞–∏–≤–∞—Ç—å HTML –≤ –ø—Ä–æ—à–∏–≤–∫—É –ø—Ä–∏ —Å–±–æ—Ä–∫–µ
- ‚úÖ –ù–µ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å HTML –∫–æ–¥ –≤—Ä—É—á–Ω—É—é
- ‚úÖ –õ–µ–≥–∫–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
firmware/
‚îú‚îÄ‚îÄ web/                    # HTML —Ñ–∞–π–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ ui.html            # –û—Å–Ω–æ–≤–Ω–æ–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ tools/                 # –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Å–±–æ—Ä–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ html_to_cpp.py     # –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä HTML ‚Üí C++
‚îÇ   ‚îî‚îÄ‚îÄ build_html.py      # –°–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏ –≤—Å–µ—Ö HTML
‚îú‚îÄ‚îÄ src/                   # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ C++
‚îÇ   ‚îú‚îÄ‚îÄ ui_html.h          # –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ platformio.ini         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å pre-—Å–∫—Ä–∏–ø—Ç–æ–º
```

## –ü—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è
–ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ `pio run` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:
```bash
python3 tools/build_html.py
```

### 2. –ö–æ–º–ø–∏–ª—è—Ü–∏—è HTML
–°–∫—Ä–∏–ø—Ç `html_to_cpp.py`:
- –ß–∏—Ç–∞–µ—Ç HTML —Ñ–∞–π–ª
- –ö–æ–¥–∏—Ä—É–µ—Ç –≤ base64
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç C++ header —Ñ–∞–π–ª
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `src/`

### 3. –í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ—à–∏–≤–∫—É
C++ –∫–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π HTML:
```cpp
#include "ui_html.h"

// HTML –¥–æ—Å—Ç—É–ø–µ–Ω –∫–∞–∫:
// ui_html_data[] - base64 —Å—Ç—Ä–æ–∫–∞
// ui_html_size - —Ä–∞–∑–º–µ—Ä
// ui_html_original_size - –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ HTML —Ñ–∞–π–ª–∞
1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –≤ –ø–∞–ø–∫–µ `web/`
2. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç: `pio run`
3. HTML –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –≤ C++

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ HTML
1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª –≤ –ø–∞–ø–∫–µ `web/`
2. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç: `pio run`
3. –ò–∑–º–µ–Ω–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ø–∞–¥—É—Ç –≤ –ø—Ä–æ—à–∏–≤–∫—É

### –†—É—á–Ω–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è HTML
```bash
# –ö–æ–º–ø–∏–ª—è—Ü–∏—è –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
python3 tools/html_to_cpp.py web/demo.html src/demo_html.h demo_html

# –ö–æ–º–ø–∏–ª—è—Ü–∏—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤
python3 tools/build_html.py
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Base64 –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
- HTML —Ñ–∞–π–ª—ã –∫–æ–¥–∏—Ä—É—é—Ç—Å—è –≤ base64 –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è –≤ C++
- –†–∞–∑–º–µ—Ä —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ –Ω–∞ 33%
- –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ runtime –Ω–∞ ESP8266

### –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
–ö–∞–∂–¥—ã–π HTML —Ñ–∞–π–ª —Å–æ–∑–¥–∞–µ—Ç header —Å:
```cpp
#ifndef UI_HTML_H
#define UI_HTML_H

#include <Arduino.h>

// Auto-generated from ui.html
// Original size: 18513 bytes
// Encoded size: 24684 bytes

const char ui_html_data[] = R"rawliteral(...base64_data...)rawliteral";

const size_t ui_html_size = 24684;
const size_t ui_html_original_size = 18513;

#endif // UI_HTML_H
```

### WebServer –∫–ª–∞—Å—Å
–û—Ç–≤–µ—á–∞–µ—Ç –∑–∞:
- –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ base64
- –û—Ç–¥–∞—á—É HTML –∫–ª–∏–µ–Ω—Ç–∞–º
- –û–±—Ä–∞–±–æ—Ç–∫—É API –∑–∞–ø—Ä–æ—Å–æ–≤

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å–∏—Å—Ç–µ–º—ã

1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**: HTML –æ—Ç–¥–µ–ª–µ–Ω –æ—Ç C++ –∫–æ–¥–∞
2. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**: –ù–µ—Ç —Ä—É—á–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
3. **–í–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç—å**: HTML —Ñ–∞–π–ª—ã –≤ git
4. **–ü—Ä–æ—Å—Ç–æ—Ç–∞**: –û–¥–∏–Ω HTML —Ñ–∞–π–ª = –æ–¥–∏–Ω C++ header
5. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: HTML –≤—Å—Ç—Ä–æ–µ–Ω –≤ –ø—Ä–æ—à–∏–≤–∫—É

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –†–∞–∑–º–µ—Ä HTML –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –ø–∞–º—è—Ç—å—é ESP8266
- Base64 —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –Ω–∞ ~33%
- –ù–µ—Ç —Å–∂–∞—Ç–∏—è (gzip –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –ø–∞–º—è—Ç–∏)

## –†–∞—Å—à–∏—Ä–µ–Ω–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∂–∞—Ç–∏—è
–ú–æ–∂–Ω–æ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å `html_to_cpp.py` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è gzip:
```python
import gzip
compressed = gzip.compress(html_content.encode('utf-8'))
```

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞ CSS/JS —Ñ–∞–π–ª–æ–≤
–°–∏—Å—Ç–µ–º–∞ –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤:
```python
# –í build_html.py
for file in web_dir.glob("*.{html,css,js}"):
    # –∫–æ–º–ø–∏–ª—è—Ü–∏—è —Ñ–∞–π–ª–∞
```

## –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ HTML –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è
python3 tools/build_html.py

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã
ls -la src/*_html.h
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø—Ä–æ—à–∏–≤–∫—É –Ω–∞ ESP8266
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ WiFi "EyeController"
3. –û—Ç–∫—Ä–æ–π—Ç–µ http://192.168.4.1
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

### –õ–æ–≥–∏
–í –º–æ–Ω–∏—Ç–æ—Ä–µ –ø–æ—Ä—Ç–∞ ESP8266 –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è:
```
HTML compilation complete!
WebServer initialized
```

---

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ
