# Eye Controller - ESP8266 Servo Control

–ü—Ä–æ–µ–∫—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–≤—É–º—è —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞–º–∏ (yaw –∏ pitch) —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ ESP8266 (Wemos D1 Mini).

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üåê WiFi —Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞ —Å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
- üéØ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üé¨ –ê–Ω–∏–º–∞—Ü–∏–∏ —Å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏
- üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ EEPROM
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
- üì± –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- üîß –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è HTML –≤ C++ –∫–æ–¥
- üì¶ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤)

## –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

### –°–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥—ã
- **Yaw —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥**: –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫ –ø–∏–Ω—É D1
- **Pitch —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥**: –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫ –ø–∏–Ω—É D2
- **–ü–∏—Ç–∞–Ω–∏–µ**: 5V (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤–Ω–µ—à–Ω–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø–∏—Ç–∞–Ω–∏—è)
- **GND**: –æ–±—â–∏–π –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```
ESP8266 (Wemos D1 Mini)    –°–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥—ã
‚îú‚îÄ‚îÄ D1 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Yaw Servo Signal
‚îú‚îÄ‚îÄ D2 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Pitch Servo Signal
‚îú‚îÄ‚îÄ 5V ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Servo Power (+)
‚îî‚îÄ‚îÄ GND ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Servo GND (-)
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- PlatformIO IDE –∏–ª–∏ VS Code —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º PlatformIO
- ESP8266 (Wemos D1 Mini)
- 2 —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞ (SG90 –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ)
- –ò—Å—Ç–æ—á–Ω–∏–∫ –ø–∏—Ç–∞–Ω–∏—è 5V –¥–ª—è —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–æ–≤

### –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∏ –∑–∞–≥—Ä—É–∑–∫–∞
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ PlatformIO
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ ESP8266 –∫ –∫–æ–º–ø—å—é—Ç–µ—Ä—É
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É: `pio run --target upload`
4. –û—Ç–∫—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä –ø–æ—Ä—Ç–∞: `pio device monitor`

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫
1. –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—à–∏–≤–∫–∏ ESP8266 —Å–æ–∑–¥–∞—Å—Ç WiFi —Ç–æ—á–∫—É –¥–æ—Å—Ç—É–ø–∞ "EyeController"
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ç–∏ "EyeController" (–ø–∞—Ä–æ–ª—å: 12345678)
3. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É `http://192.168.4.1` –∏–ª–∏ `http://eye.local`
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥—ã –∏ –Ω–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º!

## –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **Canvas**: –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∑–≥–ª—è–¥–æ–º –º—ã—à—å—é
- **–°–ª–∞–π–¥–µ—Ä—ã Yaw/Pitch**: —Ç–æ—á–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–ü—Ä–µ—Å–µ—Ç—ã –∞–Ω–∏–º–∞—Ü–∏–π**: –≥–æ—Ç–æ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–≤–∏–∂–µ–Ω–∏—è
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ —Ü–∏–∫–ª–∞**: –∫–æ–Ω—Ç—Ä–æ–ª—å –∞–Ω–∏–º–∞—Ü–∏–∏
- **CSV —Ä–µ–¥–∞–∫—Ç–æ—Ä**: —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π

### API Endpoints

#### GET /api/position
–ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
```json
{
  "yaw": 0.0,
  "pitch": 0.0,
  "animationRunning": false,
  "currentPreset": "Center Sweep",
  "speed": 1.0,
  "loop": true
}
```

#### POST /api/position
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–æ–≤
```
yaw=15.5&pitch=-10.0
```

#### POST /api/animation
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–µ–π
```
action=start&data=-60,0,600\n-30,0,600\n0,0,600
action=stop
```

#### POST /api/settings
–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
```
preset=Figure Eight&speed=1.5&loop=true
```

#### GET /api/settings
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–æ–≤

### –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥—ã –≤ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ
2. –û—Ç—Ä–µ–≥—É–ª–∏—Ä—É–π—Ç–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –∫—Ä–µ–ø–ª–µ–Ω–∏–µ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –Ω—É–∂–Ω–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–∏–º–∏—Ç–æ–≤ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **–î–∏–∞–ø–∞–∑–æ–Ω Yaw**: -60¬∞ –¥–æ +60¬∞
- **–î–∏–∞–ø–∞–∑–æ–Ω Pitch**: -60¬∞ –¥–æ +60¬∞
- **–°–∫–æ—Ä–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏**: 0.5-2.0
- **–¢–∏–ø —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞**: SG90 –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ (180¬∞)

## –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π

–ê–Ω–∏–º–∞—Ü–∏–∏ –∑–∞–¥–∞—é—Ç—Å—è –≤ CSV —Ñ–æ—Ä–º–∞—Ç–µ:
```
yaw,pitch,duration
-60,0,600
-30,0,600
0,0,600
30,0,600
60,0,600
0,0,600
```

–ì–¥–µ:
- `yaw` - —É–≥–æ–ª –ø–æ–≤–æ—Ä–æ—Ç–∞ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ (-60 –¥–æ +60)
- `pitch` - —É–≥–æ–ª –ø–æ–≤–æ—Ä–æ—Ç–∞ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ (-60 –¥–æ +60)  
- `duration` - –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –°–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥—ã –Ω–µ –¥–≤–∏–≥–∞—é—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–∏—Ç–∞–Ω–∏—è (5V)
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–æ–¥–æ–≤
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–∏–º–∏—Ç–æ–≤ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

### –ù–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ WiFi
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞ "EyeController" —Å–æ–∑–¥–∞–Ω–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–æ–ª—å: 12345678
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ IP: 192.168.4.1

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –±—Ä–∞—É–∑–µ—Ä
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ WiFi —Å–µ—Ç–∏

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- ESPAsyncWebServer - –≤–µ–±-—Å–µ—Ä–≤–µ—Ä
- ArduinoJson - –æ–±—Ä–∞–±–æ—Ç–∫–∞ JSON
- Servo - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞–º–∏
- ESP8266mDNS - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ .local –¥–æ–º–µ–Ω–æ–≤

### –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
- Flash: ~400KB
- RAM: ~30KB
- EEPROM: 512 –±–∞–π—Ç –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–æ–≤: ~50Hz
- –ó–∞–¥–µ—Ä–∂–∫–∞ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞: <100ms
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ 50 –∫–∞–¥—Ä–æ–≤ –∞–Ω–∏–º–∞—Ü–∏–∏

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –¥–ª—è –ª–∏—á–Ω—ã—Ö –∏ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.

## –°–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∫–∏

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–∏—Å—Ç–µ–º—É –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ HTML –≤ C++ –∫–æ–¥:

- **HTML —Ñ–∞–π–ª—ã** —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ `web/`
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è** –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –ø—Ä–æ–µ–∫—Ç–∞
- **Base64 –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è –≤ –ø—Ä–æ—à–∏–≤–∫—É
- **–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏**: [BUILD_SYSTEM.md](BUILD_SYSTEM.md)

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `web/ui.html`
2. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç: `pio run`
3. HTML –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—Å—Ç—Ä–æ–∏—Ç—Å—è –≤ –ø—Ä–æ—à–∏–≤–∫—É

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –º–æ–Ω–∏—Ç–æ—Ä–µ –ø–æ—Ä—Ç–∞
4. –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
